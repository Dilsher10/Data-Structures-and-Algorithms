<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permutation in String</title>
</head>

<body>
    <script>
        function checkInclusion(s1, s2) {
            if (s1.length > s2.length) {
                return false;
            }

            let s1Count = new Array(26).fill(0);
            let s2Count = new Array(26).fill(0);

            for (let i = 0; i < s1.length; i++) {
                s1Count[s1.charCodeAt(i) - 97]++;
                s2Count[s2.charCodeAt(i) - 97]++;
            }

            // Count how many characters have matching frequencies in s1Count and s2Count
            let matches = 0;
            for (let i = 0; i < 26; i++) {
                if (s1Count[i] === s2Count[i]) {
                    matches++;
                }
            }

            // Sliding window portion start from here
            let l = 0;
            for (let r = s1.length; r < s2.length; r++) {
                if (matches === 26) {
                    return true;
                }

                // Add the next character at the right end of the window
                let index = s2.charCodeAt(r) - 97;
                s2Count[index]++;
                if (s1Count[index] === s2Count[index]) {
                    matches++; // the new count matches s1 count
                } else if (s1Count[index] + 1 === s2Count[index]) {
                    matches--; // previously matched but now it doesn’t
                }

                // Remove the character at the left end of the window
                index = s2.charCodeAt(l) - 97;
                s2Count[index]--;
                if (s1Count[index] === s2Count[index]) {
                    matches++; // after decrement, it matches s1 count
                } else if (s1Count[index] - 1 === s2Count[index]) {
                    matches--; // previously matched but now it doesn’t
                }

                l++;
            }

            return matches === 26;
        }

        s1 = "abc", s2 = "lecabee"
        console.log(checkInclusion(s1, s2));
    </script>
</body>

</html>