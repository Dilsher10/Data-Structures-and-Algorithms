<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Schedule</title>
</head>

<body>
    <script>
        function canFinish(numCourses, prerequisites) {
            const preMap = new Map();

            for (let i = 0; i < numCourses; i++) {
                preMap.set(i, []);
            }

            for (let [crs, pre] of prerequisites) {
                preMap.get(crs).push(pre);
            }

            const visited = new Set();

            const dfs = (crs) => {
                if (visited.has(crs)) {
                    return false;
                }

                if (preMap.get(crs).length === 0) {
                    return true;
                }

                visited.add(crs);

                for (let pre of preMap.get(crs)) {
                    if (!dfs(pre)) {
                        return false;
                    }
                }

                visited.delete(crs);
                preMap.set(crs, []);
                return true;
            };

            for (let c = 0; c < numCourses; c++) {
                if (!dfs(c)) {
                    return false;
                }
            }

            return true;
        }











        function canFinish(numCourses, prerequisites) {
            const graph = new Map();

            for (let i = 0; i < numCourses; i++) {
                graph.set(i, []);
            }

            for (let [course, prereq] of prerequisites) {
                graph.get(prereq).push(course);
            }

            const state = new Array(numCourses).fill(0);
            // 0 = unvisited, 1 = visiting, 2 = visited

            function dfs(course) {
                if (state[course] === 1) return false; // cycle
                if (state[course] === 2) return true;  // already processed

                state[course] = 1;

                for (let neighbor of graph.get(course)) {
                    if (!dfs(neighbor)) return false;
                }

                state[course] = 2;
                return true;
            }

            for (let i = 0; i < numCourses; i++) {
                if (!dfs(i)) return false;
            }

            return true;
        };

        numCourses = 2, prerequisites = [[0, 1], [1, 0]];
        console.log(canFinish(numCourses, prerequisites));
    </script>
</body>

</html>