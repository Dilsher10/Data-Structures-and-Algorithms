<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Tree Maximum Path Sum</title>
</head>

<body>
    <script>
        function maxPathSum(root) {
            let max_sum = -Infinity;

            function dfs(node) {
                if (!node) return 0;

                // Ignore negative paths. Compute max path from left and right subtrees
                const left_path_sum = Math.max(dfs(node.left), 0);
                const right_path_sum = Math.max(dfs(node.right), 0);

                // Max path through the current node
                const path_sum_with_node = node.val + left_path_sum + right_path_sum;

                // Update global maximum
                max_sum = Math.max(max_sum, path_sum_with_node);

                // Return max path to parent
                return node.val + Math.max(left_path_sum, right_path_sum);
            }

            dfs(root);
            return max_sum;
        };
    </script>
</body>

</html>