<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement Trie (Prefix Tree)</title>
</head>

<body>
    <script>
        class TrieNode {
            constructor() {
                this.children = new Map();
                this.endOfWord = false;
            }
        }


        class PrefixTree {
            constructor() {
                this.root = new TrieNode();
            }

            insert(word) {
                let cur = this.root;

                for (let c of word) {
                    if (!cur.children.has(c)) {
                        cur.children.set(c, new TrieNode());
                    }
                    // Move to the next node
                    cur = cur.children.get(c);
                }

                // Mark the end of the word
                cur.endOfWord = true;
            }

            search(word) {
                let cur = this.root;

                for (let c of word) {
                    if (!cur.children.has(c)) {
                        return false;
                    }
                    // Move to the next node
                    cur = cur.children.get(c);
                }
                return cur.endOfWord;
            }

            startsWith(prefix) {
                let cur = this.root;
                
                for (let c of prefix) {
                    if (!cur.children.has(c)) {
                        return false;
                    }
                    // Move to the next node
                    cur = cur.children.get(c);
                }
                // All characters of the prefix found
                return true;
            }
        }


        // Test the PrefixTree
        const trie = new PrefixTree();

        trie.insert("apple");
        console.log(trie.search("apple"));    // true
        console.log(trie.search("app"));      // false
        console.log(trie.startsWith("app"));  // true

        trie.insert("app");
        console.log(trie.search("app"));      // true
        console.log(trie.startsWith("ap"));   // true
        console.log(trie.startsWith("banana")); // false
    </script>
</body>

</html>